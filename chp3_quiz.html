<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å˜æ¢å…³ç³»ä¸å¾ªç¯å·ç§¯æµ‹éªŒ</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .start-screen {
            text-align: center;
            padding: 20px;
        }

        .info-form {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #007bff;
        }

        .exam-info {
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .exam-info h3 {
            color: #004085;
            margin-bottom: 10px;
        }

        .exam-info ul {
            margin-left: 20px;
            color: #34495e;
            line-height: 1.8;
            text-align: left;
        }

        .progress-bar {
            background: #ecf0f1;
            height: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #007bff, #28a745);
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #dee2e6;
            transition: all 0.3s;
        }

        .question-card.answered {
            border-color: #007bff;
            background: #e7f3ff;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: #007bff;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-category {
            background: #95a5a6;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
        }
        
        .question-category.definition { background: #17a2b8; }
        .question-category.relations { background: #6f42c1; }
        .question-category.convolution { background: #fd7e14; }

        .question-text {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .option:hover {
            background: #f8f9fa;
            border-color: #007bff;
            transform: translateX(5px);
        }

        .option.selected {
            background: #e7f3ff;
            border-color: #007bff;
            border-width: 3px;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            border-width: 3px;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            border-width: 3px;
        }

        .option-label {
            background: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.correct .option-label { background: #28a745; }
        .option.incorrect .option-label { background: #dc3545; }
        .option-text { flex: 1; color: #2c3e50; }

        .explanation {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .explanation h4 {
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .explanation p { color: #856404; line-height: 1.6; }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-submit { background: #007bff; color: white; }
        .btn-next { background: #28a745; color: white; }
        .btn-prev { background: #6c757d; color: white; }
        .btn-finish { background: #dc3545; color: white; }
        .btn-start {
            background: #007bff;
            color: white;
            padding: 15px 50px;
            font-size: 1.2em;
        }

        .result-panel {
            background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
            color: white;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            display: none;
        }

        .result-panel.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .student-info {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .student-info p { margin: 5px 0; }
        .result-score { font-size: 4em; font-weight: bold; margin: 20px 0; }
        .result-message { font-size: 1.5em; margin-bottom: 20px; }

        .statistics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: white;
            color: #2c3e50;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .stat-value { font-size: 2em; font-weight: bold; margin: 10px 0; }
        .stat-label { color: #7f8c8d; font-size: 0.9em; }
        
        .review-section { margin-top: 30px; }
        .review-question {
            background: white;
            color: #2c3e50;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }

        .review-status {
            padding: 5px 15px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9em;
        }
        .review-status.correct { background: #d4edda; color: #155724; }
        .review-status.wrong { background: #f8d7da; color: #721c24; }

        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 1.5em; }
            .button-group { flex-direction: column; }
            button { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å˜æ¢å…³ç³»ä¸å¾ªç¯å·ç§¯æµ‹éªŒ</h1>
        <p class="subtitle">DTFT / Zå˜æ¢ / DFS / DFT</p>

        <!-- å¼€å§‹ç•Œé¢ -->
        <div id="startScreen" class="start-screen">
            <div class="exam-info">
                <h3>ğŸ“‹ æµ‹éªŒè¯´æ˜</h3>
                <ul>
                    <li>å…±20é“é€‰æ‹©é¢˜ï¼Œé‡ç‚¹è€ƒæŸ¥å››å¤§å˜æ¢çš„**å®šä¹‰ã€å…³ç³»**ä¸**å¾ªç¯å·ç§¯**ã€‚</li>
                    <li>ç‚¹å‡»é€‰é¡¹é€‰æ‹©ç­”æ¡ˆï¼Œå¯éšæ—¶ä¿®æ”¹ã€‚</li>
                    <li>ç‚¹å‡»â€œæäº¤ç­”æ¡ˆâ€å¯æŸ¥çœ‹æœ¬é¢˜è§£æï¼Œç„¶åè¿›å…¥ä¸‹ä¸€é¢˜ã€‚</li>
                    <li>å…¨éƒ¨å®Œæˆåå¯æŸ¥çœ‹æ€»æˆç»©å’Œå®Œæ•´çš„ç­”é¢˜å›é¡¾ã€‚</li>
                </ul>
            </div>

            <div class="info-form">
                <h3 style="color: #2c3e50; margin-bottom: 20px;">è¯·å¡«å†™ä½ çš„ä¿¡æ¯</h3>
                <div class="form-group">
                    <label for="studentId">å­¦å· <span style="color: red;">*</span></label>
                    <input type="text" id="studentId" placeholder="è¯·è¾“å…¥å­¦å·" required>
                </div>
                <div class="form-group">
                    <label for="studentName">å§“å <span style="color: red;">*</span></label>
                    <input type="text" id="studentName" placeholder="è¯·è¾“å…¥å§“å" required>
                </div>
                <button class="btn-start" onclick="startExam()">å¼€å§‹æµ‹éªŒ</button>
            </div>
        </div>

        <!-- è€ƒè¯•ç•Œé¢ -->
        <div id="examScreen" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0/20 å·²å®Œæˆ</div>
            </div>
            <div id="questionContainer"></div>
            <div class="button-group">
                <button class="btn-prev" id="prevBtn" onclick="previousQuestion()">â¬…ï¸ ä¸Šä¸€é¢˜</button>
                <button class="btn-submit" id="submitBtn" onclick="submitAnswer()">âœ“ æäº¤ç­”æ¡ˆ</button>
                <button class="btn-next" id="nextBtn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â¡ï¸</button>
                <button class="btn-finish" id="finishBtn" onclick="finishExam()" style="display: none;">ğŸ å®Œæˆæµ‹éªŒ</button>
            </div>
        </div>

        <!-- ç»“æœç•Œé¢ -->
        <div class="result-panel" id="resultPanel">
            <h2>æµ‹éªŒå®Œæˆï¼</h2>
            <div class="student-info">
                <p><strong>å­¦å·ï¼š</strong><span id="resultStudentId"></span></p>
                <p><strong>å§“åï¼š</strong><span id="resultStudentName"></span></p>
            </div>
            <div class="result-score" id="resultScore">0/20</div>
            <div class="result-message" id="resultMessage"></div>
            <div class="statistics">
                <div class="stat-card">
                    <div class="stat-label">æ­£ç¡®ç‡</div>
                    <div class="stat-value" id="accuracyRate">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">å®šä¹‰ä¸æ€§è´¨</div>
                    <div class="stat-value" id="definitionScore">0/8</div>
                </div>
                 <div class="stat-card">
                    <div class="stat-label">å˜æ¢é—´å…³ç³»</div>
                    <div class="stat-value" id="relationsScore">0/7</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">å¾ªç¯å·ç§¯</div>
                    <div class="stat-value" id="convolutionScore">0/5</div>
                </div>
            </div>
            <button class="btn-submit" onclick="showReview()" style="margin-top: 30px;">ğŸ“ æŸ¥çœ‹è¯¦ç»†è§£æ</button>
            <button class="btn-next" onclick="location.reload()" style="margin-top: 10px;">ğŸ”„ é‡æ–°å¼€å§‹</button>
        </div>

        <div id="reviewSection" style="display: none;">
            <h2 style="margin: 30px 0 20px 0; color: #2c3e50;">ğŸ“š ç­”é¢˜å›é¡¾ä¸è§£æ</h2>
            <div id="reviewContainer"></div>
        </div>
    </div>

    <script>
        const originalQuestions = [
            // å®šä¹‰ä¸æ€§è´¨
            { id: 1, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'ç¦»æ•£æ—¶é—´å‚…é‡Œå¶å˜æ¢(DTFT)é€‚ç”¨äºåˆ†æå“ªç±»ä¿¡å·ï¼Ÿ',
                options: ['ç¦»æ•£æ—¶é—´ã€å‘¨æœŸä¿¡å·', 'ç¦»æ•£æ—¶é—´ã€éå‘¨æœŸåºåˆ—', 'è¿ç»­æ—¶é—´ã€å‘¨æœŸä¿¡å·', 'è¿ç»­æ—¶é—´ã€éå‘¨æœŸä¿¡å·'],
                correct: 1, explanation: 'DTFTæ˜¯ç”¨äºåˆ†æç¦»æ•£æ—¶é—´ã€éå‘¨æœŸåºåˆ—çš„æ•°å­¦å·¥å…·ã€‚å¯¹äºå‘¨æœŸåºåˆ—ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨DFSã€‚' },
            { id: 2, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'DTFTå˜æ¢å¾—åˆ°çš„é¢‘è°± $X(e^{j\\omega})$ æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ',
                options: ['å…³äºé¢‘ç‡ $\\omega$ è¿ç»­ä¸”å‘¨æœŸä¸º $2\\pi$', 'å…³äºé¢‘ç‡ $\\omega$ ç¦»æ•£ä¸”å‘¨æœŸä¸º $N$', 'å…³äºé¢‘ç‡ $\\omega$ è¿ç»­ä¸”éå‘¨æœŸ', 'å…³äºé¢‘ç‡ $\\omega$ ç¦»æ•£ä¸”éå‘¨æœŸ'],
                correct: 0, explanation: 'ç”±äº $e^{-j\\omega n}$ çš„å‘¨æœŸæ€§ï¼ŒDTFTçš„ç»“æœ $X(e^{j\\omega})$ æ˜¯å…³äºé¢‘ç‡ $\\omega$ çš„è¿ç»­å‡½æ•°ï¼Œå¹¶ä¸”ä»¥ $2\\pi$ ä¸ºå‘¨æœŸã€‚' },
            { id: 3, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'ç¦»æ•£å‚…é‡Œå¶çº§æ•°(DFS)æ˜¯ä¸ºåˆ†æå“ªç±»ä¿¡å·è€Œç”Ÿçš„ï¼Ÿ',
                options: ['æœ‰é™é•¿ç¦»æ•£åºåˆ—', 'æ— é™é•¿éå‘¨æœŸåºåˆ—', 'å‘¨æœŸç¦»æ•£åºåˆ—', 'æ¨¡æ‹Ÿå‘¨æœŸä¿¡å·'],
                correct: 2, explanation: 'DFSä¸“é—¨ç”¨äºå°†ä¸€ä¸ªå‘¨æœŸæ€§çš„ç¦»æ•£åºåˆ—åˆ†è§£æˆä¸€ç»„è°æ³¢ç›¸å…³çš„å¤æŒ‡æ•°ä¿¡å·ä¹‹å’Œï¼Œå› æ­¤å®ƒé€‚ç”¨äºåˆ†æå‘¨æœŸç¦»æ•£åºåˆ—ã€‚' },
            { id: 4, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'DFSå˜æ¢å¾—åˆ°çš„é¢‘è°± $\\tilde{X}[k]$ æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ',
                options: ['è¿ç»­ä¸”å‘¨æœŸ', 'ç¦»æ•£ä¸”å‘¨æœŸ', 'è¿ç»­ä¸”éå‘¨æœŸ', 'ç¦»æ•£ä¸”éå‘¨æœŸ'],
                correct: 1, explanation: 'DFSå°†æ—¶åŸŸçš„å‘¨æœŸç¦»æ•£ä¿¡å·å˜æ¢ä¸ºé¢‘åŸŸçš„ç¦»æ•£é¢‘è°±ç³»æ•°ï¼Œè¿™äº›ç³»æ•°åŒæ ·æ˜¯å‘¨æœŸçš„ï¼Œå‘¨æœŸä¸åŸä¿¡å·ç›¸åŒã€‚' },
            { id: 5, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'ç¦»æ•£å‚…é‡Œå¶å˜æ¢(DFT)ä¸»è¦åº”ç”¨äºå“ªç±»ä¿¡å·ï¼Ÿ',
                options: ['æ— é™é•¿åºåˆ—', 'å‘¨æœŸåºåˆ—', 'æœ‰é™é•¿åºåˆ—', 'æ¨¡æ‹Ÿä¿¡å·'],
                correct: 2, explanation: 'DFTæ˜¯ä¸ºè®¡ç®—æœºå¤„ç†è€Œè®¾è®¡çš„ï¼Œå®ƒå¤„ç†çš„å¯¹è±¡æ˜¯æœ‰é™é•¿ç¦»æ•£åºåˆ—ï¼Œè¿™åœ¨æ•°å­—ä¿¡å·å¤„ç†ä¸­éå¸¸å®ç”¨ã€‚' },
            { id: 6, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'Zå˜æ¢ä¸­çš„æ”¶æ•›åŸŸ(ROC)èµ·ä»€ä¹ˆä½œç”¨ï¼Ÿ',
                options: ['ç¡®å®šå˜æ¢çš„å¹…åº¦', 'ç¡®å®šåºåˆ—æ˜¯å®æ•°è¿˜æ˜¯å¤æ•°', 'å”¯ä¸€ç¡®å®šZå˜æ¢å¯¹åº”çš„åŸåºåˆ—', 'ç¡®å®šè®¡ç®—çš„å¤æ‚åº¦'],
                correct: 2, explanation: 'ä¸€ä¸ªZå˜æ¢è¡¨è¾¾å¼å¯èƒ½å¯¹åº”å¤šä¸ªä¸åŒçš„æ—¶é—´åºåˆ—ï¼ˆå¦‚ä¸€ä¸ªå³è¾¹åºåˆ—å’Œä¸€ä¸ªå·¦è¾¹åºåˆ—ï¼‰ã€‚åªæœ‰ç»“åˆæ”¶æ•›åŸŸ(ROC)ï¼Œæ‰èƒ½å”¯ä¸€åœ°ç¡®å®šå…¶å¯¹åº”çš„åŸåºåˆ—ã€‚' },
            { id: 7, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'ä»¥ä¸‹å“ªç§å˜æ¢æ˜¯ä¸“é—¨ä¸ºè®¡ç®—æœºè¿›è¡Œæ•°å€¼è®¡ç®—è€Œæå‡ºçš„ï¼Ÿ',
                options: ['Zå˜æ¢', 'DTFT', 'DFS', 'DFT'],
                correct: 3, explanation: 'DTFTå’ŒZå˜æ¢æ˜¯ç†è®ºåˆ†æå·¥å…·ï¼Œæ¶‰åŠè¿ç»­å˜é‡ã€‚DFTå°†æ—¶åŸŸå’Œé¢‘åŸŸéƒ½ç¦»æ•£åŒ–ä¸ºæœ‰é™ä¸ªç‚¹ï¼Œä½¿å…¶å¯ä»¥ç›´æ¥åœ¨è®¡ç®—æœºä¸Šè¿›è¡Œæ•°å€¼è®¡ç®—ã€‚' },
            { id: 8, category: 'definition', categoryName: 'å®šä¹‰ä¸æ€§è´¨', question: 'å¦‚æœä¸€ä¸ªå› æœLTIç³»ç»Ÿçš„Zå˜æ¢æ”¶æ•›åŸŸ(ROC)åŒ…å«äº†å•ä½åœ†ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ',
                options: ['ç³»ç»Ÿæ˜¯ä¸ç¨³å®šçš„', 'ç³»ç»Ÿæ˜¯ç¨³å®šçš„', 'ç³»ç»Ÿæ˜¯FIRç³»ç»Ÿ', 'ç³»ç»Ÿæ²¡æœ‰é›¶ç‚¹'],
                correct: 1, explanation: 'æ”¶æ•›åŸŸåŒ…å«å•ä½åœ†æ˜¯ç³»ç»Ÿç¨³å®šçš„ä¸€ä¸ªé‡è¦æ ‡å¿—ï¼Œå› ä¸ºå®ƒæ„å‘³ç€è¯¥ç³»ç»Ÿçš„DTFTå­˜åœ¨ï¼Œå³é¢‘ç‡å“åº”æœ‰ç•Œã€‚å¯¹äºå› æœç³»ç»Ÿï¼Œè¿™æ„å‘³ç€æ‰€æœ‰æç‚¹éƒ½åœ¨å•ä½åœ†å†…ã€‚' },

            // å˜æ¢é—´å…³ç³»
            { id: 9, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'DTFTä¸Zå˜æ¢ä¹‹é—´æœ€æ ¸å¿ƒçš„å…³ç³»æ˜¯ï¼Ÿ',
                options: ['Zå˜æ¢æ˜¯DTFTçš„é¢‘åŸŸé‡‡æ ·', 'DTFTæ˜¯Zå˜æ¢åœ¨å•ä½åœ† $|z|=1$ ä¸Šçš„å–å€¼', 'ä¸¤è€…æ˜¯å®Œå…¨ç­‰ä»·çš„', 'DTFTæ˜¯Zå˜æ¢çš„å‘¨æœŸå»¶æ‹“'],
                correct: 1, explanation: 'Zå˜æ¢å¯ä»¥çœ‹ä½œæ˜¯DTFTçš„æ¨å¹¿ã€‚å½“Zå˜æ¢çš„æ”¶æ•›åŸŸåŒ…å«å•ä½åœ†æ—¶ï¼Œä»¤ $z = e^{j\\omega}$ï¼ŒZå˜æ¢å°±é€€åŒ–ä¸ºäº†DTFTã€‚' },
            { id: 10, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'DFTä¸DTFTä¹‹é—´çš„å…³ç³»å¯ä»¥æè¿°ä¸ºï¼Ÿ',
                options: ['DFTæ˜¯DTFTçš„çº¿æ€§æ’å€¼', 'DFTæ˜¯å¯¹DTFTåœ¨ä¸€ä¸ªå‘¨æœŸ $[0, 2\\pi]$ å†…çš„Nç‚¹ç­‰é—´éš”é‡‡æ ·', 'DTFTæ˜¯DFTçš„ç®€å•æ±‚å’Œ', 'ä¸¤è€…æ²¡æœ‰ç›´æ¥å…³ç³»'],
                correct: 1, explanation: 'å¯¹äºä¸€ä¸ªæœ‰é™é•¿åºåˆ—ï¼Œå…¶Nç‚¹DFTçš„é¢‘è°±ç³»æ•° $X[k]$ï¼Œæ­£å¥½æ˜¯è¯¥åºåˆ—DTFT $X(e^{j\\omega})$ åœ¨Nä¸ªç¦»æ•£é¢‘ç‡ç‚¹ $\\omega_k = 2\\pi k/N$ ä¸Šçš„é‡‡æ ·å€¼ã€‚' },
            { id: 11, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'DFSä¸DFTä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ',
                options: ['DFTç³»æ•°æ˜¯DFSç³»æ•°çš„Nå€', 'DFSç³»æ•°æ˜¯DFTç³»æ•°çš„Nå€', 'ä¸¤è€…å®Œå…¨ç›¸åŒ', 'ä¸¤è€…äº’ä¸ºå€’æ•°'],
                correct: 0, explanation: 'å¯¹äºä¸€ä¸ªå‘¨æœŸä¸ºNçš„åºåˆ—ï¼Œå–å…¶ä¸€ä¸ªä¸»å€¼å‘¨æœŸåºåˆ—è¿›è¡ŒNç‚¹DFTï¼Œå¾—åˆ°çš„DFTç³»æ•° $X[k]$ æ˜¯å…¶DFSç³»æ•° $\\tilde{X}[k]$ çš„Nå€ï¼Œå³ $X[k] = N \\cdot \\tilde{X}[k]$ã€‚' },
            { id: 12, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'å¦‚æœä¸€ä¸ªåºåˆ—çš„Zå˜æ¢æ”¶æ•›åŸŸä¸åŒ…å«å•ä½åœ†ï¼Œé‚£ä¹ˆå®ƒçš„DTFTä¼šæ€æ ·ï¼Ÿ',
                options: ['DTFTå­˜åœ¨ä¸”è¿ç»­', 'DTFTä¸€å®šä¸ºé›¶', 'DTFTä¸å­˜åœ¨ï¼ˆæˆ–è€…è¯´ä¸æ”¶æ•›ï¼‰', 'DTFTç­‰äºZå˜æ¢çš„å®éƒ¨'],
                correct: 2, explanation: 'DTFTæ˜¯Zå˜æ¢åœ¨å•ä½åœ†ä¸Šçš„ç‰¹ä¾‹ã€‚å¦‚æœæ”¶æ•›åŸŸä¸åŒ…å«å•ä½åœ†ï¼Œæ„å‘³ç€åœ¨ $z=e^{j\\omega}$ è¿™æ¡è·¯å¾„ä¸ŠZå˜æ¢çº§æ•°ä¸æ”¶æ•›ï¼Œå› æ­¤DTFTä¸å­˜åœ¨ã€‚' },
            { id: 13, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'å“ªä¸¤ç§å˜æ¢å¤„ç†çš„æ˜¯æ—¶åŸŸå‘¨æœŸä¿¡å·ï¼Ÿ',
                options: ['DTFT å’Œ Zå˜æ¢', 'DFS å’Œ è¿ç»­æ—¶é—´å‚…é‡Œå¶çº§æ•°(FS)', 'DFT å’Œ DTFT', 'DFS å’Œ DFTï¼ˆéšå¼å‘¨æœŸï¼‰'],
                correct: 3, explanation: 'DFSæ˜¯ä¸“é—¨ä¸ºåˆ†æå‘¨æœŸç¦»æ•£ä¿¡å·è€Œå®šä¹‰çš„ã€‚DFTå¤„ç†æœ‰é™é•¿åºåˆ—ï¼Œä½†åœ¨æ•°å­¦ä¸Šï¼Œå®ƒéšå«åœ°å°†è¯¥æœ‰é™é•¿åºåˆ—è§†ä½œä¸€ä¸ªå‘¨æœŸåºåˆ—çš„ä¸»å€¼å‘¨æœŸï¼Œå› æ­¤DFTçš„å¾ˆå¤šæ€§è´¨ï¼ˆå¦‚å¾ªç¯å·ç§¯ï¼‰éƒ½æºäºè¿™ç§å‘¨æœŸæ€§ã€‚' },
            { id: 14, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'å“ªä¸¤ç§å˜æ¢å¾—åˆ°çš„é¢‘è°±æ˜¯ç¦»æ•£çš„ï¼Ÿ',
                options: ['DTFT å’Œ Zå˜æ¢', 'DFS å’Œ DFT', 'DTFT å’Œ DFS', 'Zå˜æ¢ å’Œ DFT'],
                correct: 1, explanation: 'DFSå’ŒDFTçš„é¢‘è°±éƒ½æ˜¯ç”±ç¦»æ•£çš„é¢‘è°±ç³»æ•°ï¼ˆè°±çº¿ï¼‰æ„æˆçš„ã€‚è€ŒDTFTå’ŒZå˜æ¢çš„é¢‘è°±æ˜¯å…³äºè¿ç»­å˜é‡ï¼ˆ$\\omega$ æˆ– $z$ï¼‰çš„å‡½æ•°ã€‚' },
            { id: 15, category: 'relations', categoryName: 'å˜æ¢é—´å…³ç³»', question: 'æ€»è§ˆå››ä¸ªå˜æ¢ï¼Œå¯ä»¥è®¤ä¸ºå“ªä¸ªå˜æ¢æ˜¯æœ€æ™®é€‚çš„ç†è®ºå·¥å…·ï¼Ÿ',
                options: ['DFTï¼Œå› ä¸ºå®ƒæœ€å®ç”¨', 'DFSï¼Œå› ä¸ºå®ƒå¤„ç†å‘¨æœŸä¿¡å·', 'DTFTï¼Œå› ä¸ºå®ƒé¢‘è°±æ˜¯è¿ç»­çš„', 'Zå˜æ¢ï¼Œå› ä¸ºå…¶ä»–å˜æ¢å¯ç”±å®ƒå¯¼å‡º'],
                correct: 3, explanation: 'Zå˜æ¢çš„æ•°å­¦å½¢å¼æœ€ä¸ºé€šç”¨ã€‚DTFTæ˜¯å®ƒåœ¨å•ä½åœ†ä¸Šçš„ç‰¹ä¾‹ï¼›è€ŒDFTå’ŒDFSå¯ä»¥çœ‹ä½œæ˜¯åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å¯¹DTFTï¼ˆä¹Ÿå°±æ˜¯Zå˜æ¢åœ¨å•ä½åœ†ä¸Šï¼‰çš„é‡‡æ ·ã€‚å› æ­¤Zå˜æ¢æä¾›äº†æœ€å¹¿æ³›çš„åˆ†ææ¡†æ¶ã€‚' },

            // å¾ªç¯å·ç§¯
            { id: 16, category: 'convolution', categoryName: 'å¾ªç¯å·ç§¯', question: 'å¾ªç¯å·ç§¯ä¸çº¿æ€§å·ç§¯æœ€ä¸»è¦çš„åŒºåˆ«åœ¨äºï¼Ÿ',
                options: ['å¾ªç¯å·ç§¯è®¡ç®—æ›´å¿«', 'å¾ªç¯å·ç§¯å­˜åœ¨â€œå·ç»•â€æˆ–â€œæ··å â€æ•ˆåº”', 'å¾ªç¯å·ç§¯åªé€‚ç”¨äºè¿ç»­ä¿¡å·', 'çº¿æ€§å·ç§¯çš„ç»“æœæ€»æ˜¯å‘¨æœŸçš„'],
                correct: 1, explanation: 'çº¿æ€§å·ç§¯çš„ç»“æœé•¿åº¦æ˜¯L+M-1ã€‚è€ŒNç‚¹å¾ªç¯å·ç§¯çš„ç»“æœé•¿åº¦æ€»æ˜¯Nã€‚å¦‚æœNå°äºL+M-1ï¼Œçº¿æ€§å·ç§¯è¶…å‡ºNç‚¹çš„éƒ¨åˆ†ä¼šâ€œå·ç»•â€å›æ¥ï¼Œä¸å‰é¢çš„éƒ¨åˆ†å åŠ ï¼Œäº§ç”Ÿæ—¶åŸŸæ··å ã€‚' },
            { id: 17, category: 'convolution', categoryName: 'å¾ªç¯å·ç§¯', question: 'DFTçš„ä¸€ä¸ªæ ¸å¿ƒæ€§è´¨æ˜¯ï¼Œæ—¶åŸŸçš„Nç‚¹å¾ªç¯å·ç§¯å¯¹åº”äºé¢‘åŸŸçš„ä»€ä¹ˆè¿ç®—ï¼Ÿ',
                options: ['å¯¹åº”ç‚¹ç›¸ä¹˜', 'å¯¹åº”ç‚¹ç›¸åŠ ', 'å·ç§¯', 'æ±‚å’Œ'],
                correct: 0, explanation: 'æ—¶åŸŸå¾ªç¯å·ç§¯å®šç†æŒ‡å‡ºï¼š$x_1[n] \\circledast_N x_2[n] \\longleftrightarrow X_1[k] X_2[k]$ã€‚è¿™ä½¿å¾—åœ¨é¢‘åŸŸç”¨ç®€å•çš„ä¹˜æ³•æ¥æ›¿ä»£æ—¶åŸŸå¤æ‚çš„å·ç§¯è¿ç®—æˆä¸ºå¯èƒ½ã€‚' },
            { id: 18, category: 'convolution', categoryName: 'å¾ªç¯å·ç§¯', question: 'å¦‚ä½•åˆ©ç”¨DFTå’Œå¾ªç¯å·ç§¯æ¥è®¡ç®—ä¸¤ä¸ªåºåˆ— $x_1[n]$ (é•¿åº¦L) å’Œ $x_2[n]$ (é•¿åº¦M) çš„çº¿æ€§å·ç§¯ï¼Ÿ',
                options: ['ç›´æ¥è®¡ç®—Nç‚¹å¾ªç¯å·ç§¯ï¼Œå…¶ä¸­N=max(L, M)', 'å°†ä¸¤ä¸ªåºåˆ—è¡¥é›¶åˆ°é•¿åº¦è‡³å°‘ä¸º L+M-1ï¼Œå†è¿›è¡ŒNç‚¹å¾ªç¯å·ç§¯', 'æ— æ³•å®ç°ï¼Œå¾ªç¯å·ç§¯å’Œçº¿æ€§å·ç§¯å®Œå…¨ä¸åŒ', 'å°†ä¸€ä¸ªåºåˆ—åè½¬åè¿›è¡Œå¾ªç¯å·ç§¯'],
                correct: 1, explanation: 'ä¸ºäº†é¿å…å¾ªç¯å·ç§¯çš„â€œå·ç»•â€æ•ˆåº”ï¼Œå¿…é¡»ä¿è¯å¾ªç¯å·ç§¯çš„é•¿åº¦Nè¶³å¤Ÿå¤§ï¼Œèƒ½å¤Ÿå®¹çº³ä¸‹çº¿æ€§å·ç§¯çš„å…¨éƒ¨ç»“æœã€‚çº¿æ€§å·ç§¯ç»“æœçš„é•¿åº¦ä¸ºL+M-1ï¼Œå› æ­¤éœ€è¦å°†ä¸¤ä¸ªåºåˆ—éƒ½è¡¥é›¶åˆ°è‡³å°‘è¿™ä¸ªé•¿åº¦ï¼Œç„¶åå†åšNç‚¹DFTã€é¢‘åŸŸç›¸ä¹˜å’ŒIDFTã€‚' },
            { id: 19, category: 'convolution', categoryName: 'å¾ªç¯å·ç§¯', question: 'å‡è®¾æœ‰ä¸¤ä¸ªåºåˆ— $x[n]=\\{1, 2\\}$ å’Œ $h[n]=\\{3, 4\\}$ï¼Œå®ƒä»¬çš„2ç‚¹å¾ªç¯å·ç§¯ç»“æœ $y[n]$ æ˜¯ä»€ä¹ˆï¼Ÿ',
                options: ['$\\{3, 10, 8\\}$', '$\\{11, 10\\}$', '$\\{10, 11\\}$', '$\\{3, 8\\}$'],
                correct: 1, explanation: '$y[0] = x[0]h[0] + x[1]h[1] = 1 \\times 3 + 2 \\times 4 = 11$ã€‚$y[1] = x[0]h[1] + x[1]h[0] = 1 \\times 4 + 2 \\times 3 = 10$ã€‚æ‰€ä»¥ç»“æœæ˜¯ $\\{11, 10\\}$ã€‚æ³¨æ„çº¿æ€§å·ç§¯çš„ç»“æœæ˜¯ $\\{3, 10, 8\\}$ï¼Œç¬¬3ä¸ªå…ƒç´ 8â€œå·ç»•â€å›æ¥å’Œç¬¬1ä¸ªå…ƒç´ 3ç›¸åŠ ï¼Œå¾—åˆ°11ã€‚' },
            { id: 20, category: 'convolution', categoryName: 'å¾ªç¯å·ç§¯', question: 'ä¸ºä»€ä¹ˆâ€œæ—¶åŸŸå¾ªç¯å·ç§¯ç­‰äºé¢‘åŸŸç›¸ä¹˜â€è¿™ä¸ªæ€§è´¨åœ¨æ•°å­—ä¿¡å·å¤„ç†ä¸­å¦‚æ­¤é‡è¦ï¼Ÿ',
                options: ['å› ä¸ºå®ƒç®€åŒ–äº†ç†è®ºæ¨å¯¼', 'å› ä¸ºå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨å¿«é€Ÿç®—æ³•ï¼ˆå¦‚FFTï¼‰é«˜æ•ˆåœ°å®ç°å·ç§¯è¿ç®—', 'å› ä¸ºå®ƒå‡å°‘äº†å­˜å‚¨éœ€æ±‚', 'å› ä¸ºå®ƒæ€»èƒ½å¾—åˆ°ä¸çº¿æ€§å·ç§¯ç›¸åŒçš„ç»“æœ'],
                correct: 1, explanation: 'è™½ç„¶é¢˜ç›®ä¸è€ƒFFTï¼Œä½†ç†è§£å…¶æ„ä¹‰å¾ˆé‡è¦ã€‚ç›´æ¥è®¡ç®—å·ç§¯å¾ˆæ…¢ï¼ˆ$O(N^2)$ï¼‰ï¼Œè€Œå˜æ¢åˆ°é¢‘åŸŸè¿›è¡Œç›¸ä¹˜å†åå˜æ¢å›æ¥çš„è®¡ç®—æ•ˆç‡è¦é«˜å¾—å¤šï¼ˆåˆ©ç”¨å¿«é€Ÿç®—æ³•å¯ä»¥è¾¾åˆ° $O(N\\log N)$ï¼‰ã€‚è¿™ä½¿å¾—å¯¹é•¿åºåˆ—è¿›è¡Œå·ç§¯æ»¤æ³¢ç­‰æ“ä½œæˆä¸ºå¯èƒ½ã€‚' }
        ];

        let questions = [];
        let currentQuestion = 0;
        let userAnswers = new Array(20).fill(null);
        let submitted = false;
        let studentInfo = { id: '', name: '' };

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function prepareQuestions() {
            const shuffledQuestions = shuffleArray(originalQuestions);
            questions = shuffledQuestions.map(q => {
                const optionsWithIndex = q.options.map((option, index) => ({
                    text: option,
                    originalIndex: index
                }));
                const shuffledOptions = shuffleArray(optionsWithIndex);
                const newCorrectIndex = shuffledOptions.findIndex(
                    opt => opt.originalIndex === q.correct
                );
                return { ...q, options: shuffledOptions.map(opt => opt.text), correct: newCorrectIndex };
            });
        }

        function startExam() {
            const studentId = document.getElementById('studentId').value.trim();
            const studentName = document.getElementById('studentName').value.trim();
            if (!studentId || !studentName) {
                alert('è¯·å¡«å†™å®Œæ•´çš„å­¦å·å’Œå§“åï¼');
                return;
            }
            studentInfo.id = studentId;
            studentInfo.name = studentName;
            prepareQuestions();
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('examScreen').style.display = 'block';
            init();
        }

        function init() {
            displayQuestion();
            updateButtons();
            updateProgress();
        }

        function displayQuestion() {
            const q = questions[currentQuestion];
            const container = document.getElementById('questionContainer');
            let html = `
                <div class="question-card ${userAnswers[currentQuestion] !== null ? 'answered' : ''}">
                    <div class="question-header">
                        <span class="question-number">ç¬¬ ${currentQuestion + 1} é¢˜</span>
                        <span class="question-category ${q.category}">${q.categoryName}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">`;
            q.options.forEach((option, index) => {
                const selected = userAnswers[currentQuestion] === index ? 'selected' : '';
                const label = String.fromCharCode(65 + index);
                html += `
                    <div class="option ${selected}" onclick="selectOption(${index})">
                        <div class="option-label">${label}</div>
                        <div class="option-text">${option}</div>
                    </div>`;
            });
            html += `</div><div class="explanation" id="explanation"></div></div>`;
            container.innerHTML = html;
            if (window.MathJax) {
                MathJax.typesetPromise([container]).catch((err) => console.log(err));
            }
        }

        function selectOption(index) {
            if (document.querySelector('.explanation.show')) return;
            userAnswers[currentQuestion] = index;
            displayQuestion();
            updateProgress();
        }

        function submitAnswer() {
            if (userAnswers[currentQuestion] === null) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼');
                return;
            }
            const q = questions[currentQuestion];
            const userAnswer = userAnswers[currentQuestion];
            const isCorrect = userAnswer === q.correct;
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                if (index === q.correct) option.classList.add('correct');
                else if (index === userAnswer && !isCorrect) option.classList.add('incorrect');
                option.style.pointerEvents = 'none';
            });
            const explanation = document.getElementById('explanation');
            const icon = isCorrect ? 'âœ“' : 'âœ—';
            const style = isCorrect ? 'color: #28a745;' : 'color: #dc3545;';
            explanation.innerHTML = `
                <h4><span style="${style}">${icon}</span> ${isCorrect ? 'å›ç­”æ­£ç¡®ï¼' : 'å›ç­”é”™è¯¯ï¼'}</h4>
                <p><strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong>${String.fromCharCode(65 + q.correct)}</p>
                <p><strong>è§£æï¼š</strong>${q.explanation}</p>`;
            explanation.classList.add('show');
            if (window.MathJax) {
                MathJax.typesetPromise([explanation]).catch((err) => console.log(err));
            }
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            if (currentQuestion === questions.length - 1) {
                document.getElementById('finishBtn').style.display = 'inline-block';
                document.getElementById('nextBtn').style.display = 'none';
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
                updateButtons();
                window.scrollTo(0, 0);
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
                updateButtons();
                window.scrollTo(0, 0);
            }
        }

        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('finishBtn').style.display = 'none';
        }
        
        function updateProgress() {
            const answered = userAnswers.filter(a => a !== null).length;
            const progressBar = document.getElementById('progressBar');
            const percentage = (answered / questions.length) * 100;
            progressBar.style.width = percentage + '%';
            progressBar.textContent = `${answered}/${questions.length} å·²é€‰æ‹©`;
        }

        function finishExam() {
            const unansweredCount = userAnswers.filter(a => a === null).length;
            if (unansweredCount > 0) {
                if (!confirm(`è¿˜æœ‰ ${unansweredCount} é¢˜æœªä½œç­”ï¼Œç¡®å®šè¦æäº¤å—ï¼Ÿ`)) return;
            } else {
                 if (!confirm(`ç¡®å®šè¦å®Œæˆå¹¶æäº¤æµ‹éªŒå—ï¼Ÿ`)) return;
            }
            submitted = true;
            calculateResults();
            document.getElementById('examScreen').style.display = 'none';
            document.getElementById('resultPanel').classList.add('show');
        }

        function calculateResults() {
            let correctCount = 0;
            let categoryScores = {
                definition: { correct: 0, total: 0 },
                relations: { correct: 0, total: 0 },
                convolution: { correct: 0, total: 0 }
            };
            questions.forEach((q, index) => {
                const isCorrect = userAnswers[index] === q.correct;
                if (isCorrect) correctCount++;
                if (categoryScores[q.category]) {
                    categoryScores[q.category].total++;
                    if (isCorrect) categoryScores[q.category].correct++;
                }
            });
            const percentage = (correctCount / questions.length * 100).toFixed(1);
            document.getElementById('resultStudentId').textContent = studentInfo.id;
            document.getElementById('resultStudentName').textContent = studentInfo.name;
            document.getElementById('resultScore').textContent = `${correctCount}/${questions.length}`;
            document.getElementById('accuracyRate').textContent = percentage + '%';
            let message = '';
            if (percentage >= 90) message = 'ğŸ‰ ä¼˜ç§€ï¼ä½ å¯¹è¿™äº›æ ¸å¿ƒæ¦‚å¿µç†è§£å¾—éå¸¸é€å½»ï¼';
            else if (percentage >= 80) message = 'ğŸ‘ è‰¯å¥½ï¼æŒæ¡å¾—ä¸é”™ï¼Œç»§ç»­åŠ æ²¹ï¼';
            else if (percentage >= 60) message = 'âœ“ åŠæ ¼ï¼åŸºæœ¬æ¦‚å¿µå·²æŒæ¡ï¼Œä½†éœ€åŠ å¼ºç»ƒä¹ ï¼';
            else message = 'âŒ éœ€è¦åŠªåŠ›ï¼è¯·è®¤çœŸå¤ä¹ å˜æ¢ä¹‹é—´çš„å…³ç³»ï¼';
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('definitionScore').textContent = `${categoryScores.definition.correct}/${categoryScores.definition.total}`;
            document.getElementById('relationsScore').textContent = `${categoryScores.relations.correct}/${categoryScores.relations.total}`;
            document.getElementById('convolutionScore').textContent = `${categoryScores.convolution.correct}/${categoryScores.convolution.total}`;
        }

        function showReview() {
            const reviewSection = document.getElementById('reviewSection');
            const reviewContainer = document.getElementById('reviewContainer');
            let html = '';
            questions.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === q.correct;
                const statusClass = isCorrect ? 'correct' : 'wrong';
                const statusText = isCorrect ? 'âœ“ æ­£ç¡®' : 'âœ— é”™è¯¯';
                html += `
                    <div class="review-question">
                        <div class="review-header">
                            <div>
                                <span class="question-number">åŸé¢˜å· ${q.id}</span>
                                <span class="question-category ${q.category}">${q.categoryName}</span>
                            </div>
                            <span class="review-status ${statusClass}">${statusText}</span>
                        </div>
                        <div class="question-text">${q.question}</div>
                        <div style="margin-top: 15px;">
                            <p><strong>ä½ çš„ç­”æ¡ˆï¼š</strong>${userAnswer !== null ? String.fromCharCode(65 + userAnswer) + '. ' + q.options[userAnswer] : 'æœªä½œç­”'}</p>
                            <p style="color: #28a745;"><strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong>${String.fromCharCode(65 + q.correct)}. ${q.options[q.correct]}</p>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                            <strong>ğŸ“– è§£æï¼š</strong>${q.explanation}
                        </div>
                    </div>`;
            });
            reviewContainer.innerHTML = html;
            reviewSection.style.display = 'block';
            if (window.MathJax) {
                MathJax.typesetPromise([reviewContainer]).catch((err) => console.log(err));
            }
            reviewSection.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>